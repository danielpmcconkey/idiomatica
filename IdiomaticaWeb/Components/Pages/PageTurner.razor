@page "/PageTurner"
@rendermode InteractiveServer
@inject UserService UserService;


<div class="row  g-2">
    <div class="col-2">
        <p>Page @OnGetCurrentPageNum() of @OnGetTotalPages()</p>
    </div>
    <div class="col-2">
        <button type="button" class="btn btn-primary" @onclick="@(e => MovePageAsync(@OnGetCurrentPageNum() - 1))">
            @UserService.GetUILabel("btnPreviousPage")
        </button>
    </div>
    <div class="col-2">
        <button type="button" class="btn btn-success" @onclick="@(e => ClearPageAsync(@OnGetCurrentPageNum() + 1))">
            @UserService.GetUILabel("btnClearPage")
        </button>
    </div>
    <div class="col-2">
        <button type="button" class="btn btn-primary" @onclick="@(e => MovePageAsync(@OnGetCurrentPageNum() + 1))">
            @UserService.GetUILabel("btnNextPage")
        </button>
    </div>
</div>
@code {
    [Parameter]
    public BookService BookService { get; set; }
    [Parameter]
    public EventCallback<int> OnMovePageAsync { get; set; }
    [Parameter]
    public EventCallback<int> OnClearPageAsync { get; set; }

    private async Task MovePageAsync(int targetPageNum)
    {
        await OnMovePageAsync.InvokeAsync(targetPageNum);
    }
    private async Task ClearPageAsync(int targetPageNum)
    {
        await OnClearPageAsync.InvokeAsync(targetPageNum);
    }
    private int OnGetCurrentPageNum()
    {
        if (BookService is null) return 0;
        return BookService.BookCurrentPageNum;
    }
    private int OnGetTotalPages()
    {
        return BookService.BookTotalPageCount;
    }
}
